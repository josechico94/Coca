<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FantaPRO Dashboard</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de íconos (Heroicons) -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <style>
        /* Fuente Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Gris claro de fondo */
        }
        /* Clases para los roles */
        .role-P { background-color: #fef08a; color: #a16207; } /* Amarillo */
        .role-D { background-color: #c7d2fe; color: #3730a3; } /* Azul */
        .role-C { background-color: #bbf7d0; color: #15803d; } /* Verde */
        .role-A { background-color: #fecaca; color: #b91c1c; } /* Rojo */

        /* Scrollbar personalizada */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #c7c7c7;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a3a3a3;
        }
        
        /* Estilo para la sección de plantilla fija */
        #mia-rosa-container {
            position: sticky;
            top: 1.5rem; /* Ajuste del sticky top */
            height: calc(100vh - 3rem); /* Altura de la ventana menos el padding */
        }
    </style>
</head>
<body class="bg-gray-100 p-4 md:p-6">

    <!-- Contenedor principal -->
    <div class="max-w-screen-2xl mx-auto">

        <!-- Cabecera y Autenticación -->
        <header class="mb-4 p-4 bg-white rounded-lg shadow-sm flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-800">
                <span class="text-indigo-600">Fanta</span><span class="text-gray-600">PRO</span> Dashboard
            </h1>
            <div id="auth-container" class="mt-4 md:mt-0 text-right">
                <button id="auth-button" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition duration-300">
                    Cargando...
                </button>
                <p id="user-id" class="text-xs text-gray-400 mt-1 font-mono"></p>
            </div>
        </header>

        <!-- Contenedor de dos columnas -->
        <div class="flex flex-col lg:flex-row gap-6">

            <!-- Columna Izquierda: Lista de Jugadores y Filtros -->
            <main class="w-full lg:w-2/3">
                
                <!-- Controles de Filtros -->
                <div class="p-4 bg-white rounded-lg shadow-sm mb-4">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Filtro por Rol -->
                        <div>
                            <label for="filter-role" class="block text-sm font-medium text-gray-700 mb-1">Filtrar por Rol</label>
                            <select id="filter-role" class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                <option value="all">Todos los Roles</option>
                                <option value="P">Portieri (P)</option>
                                <option value="D">Difensori (D)</option>
                                <option value="C">Centrocampisti (C)</option>
                                <option value="A">Attaccanti (A)</option>
                            </select>
                        </div>
                        
                        <!-- Filtro por Equipo -->
                        <div>
                            <label for="filter-team" class="block text-sm font-medium text-gray-700 mb-1">Filtrar por Equipo</label>
                            <select id="filter-team" class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                <option value="all">Todos los Equipos</option>
                                <!-- Los equipos se cargarán dinámicamente -->
                            </select>
                        </div>

                        <!-- Ordenar por -->
                        <div>
                            <label for="sort-by" class="block text-sm font-medium text-gray-700 mb-1">Ordenar por</label>
                            <select id="sort-by" class="w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                <option value="fm_desc">FantaMedia (desc)</option>
                                <option value="fm_asc">FantaMedia (asc)</option>
                                <option value="mv_desc">Media Voto (desc)</option>
                                <option value="nome_asc">Nombre (A-Z)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Grid de Jugadores -->
                <div id="loading-players" class="text-center p-10">
                    <p class="text-lg text-gray-600">Cargando jugadores...</p>
                </div>
                <div id="player-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                    <!-- Las tarjetas de jugadores se insertarán aquí -->
                </div>
            </main>

            <!-- Columna Derecha: Mi Plantilla (Sticky) -->
            <aside class="w-full lg:w-1/3">
                <div id="mia-rosa-container" class="bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                    <div class="p-4 border-b border-gray-200">
                        <h2 class="text-xl font-bold text-gray-800">La Mia Rosa (<span id="rosa-count">0</span>/25)</h2>
                        <p class="text-sm text-gray-500">Tu plantilla se guarda automáticamente.</p>
                    </div>
                    
                    <!-- Contenedor scrollable para la lista de jugadores -->
                    <div id="mia-rosa-list" class="flex-grow overflow-y-auto p-4 space-y-4">
                        <!-- Secciones por Rol -->
                        <div id="rosa-P-container">
                            <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2">Porteros (<span id="count-P">0</span>)</h3>
                            <div id="rosa-P" class="space-y-2"></div>
                        </div>
                        <div id="rosa-D-container">
                            <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2">Defensas (<span id="count-D">0</span>)</h3>
                            <div id="rosa-D" class="space-y-2"></div>
                        </div>
                        <div id="rosa-C-container">
                            <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2">Centrocampistas (<span id="count-C">0</span>)</h3>
                            <div id="rosa-C" class="space-y-2"></div>
                        </div>
                        <div id="rosa-A-container">
                            <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2">Delanteros (<span id="count-A">0</span>)</h3>
                            <div id="rosa-A" class="space-y-2"></div>
                        </div>
                        
                        <div id="rosa-empty" class="text-center text-gray-400 py-10">
                            <ion-icon name="shirt-outline" class="text-4xl"></ion-icon>
                            <p>Tu plantilla está vacía.</p>
                            <p class="text-xs">Añade jugadores desde la lista.</p>
                        </div>
                    </div>
                </div>
            </aside>

        </div>
    </div>

    <!-- Modal de Confirmación para Eliminar -->
    <div id="delete-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center hidden z-50">
      <div class="relative mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="mt-3 text-center">
          <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100">
            <ion-icon name="trash-outline" class="text-red-600 text-2xl"></ion-icon>
          </div>
          <h3 class="text-lg leading-6 font-medium text-gray-900 mt-2">Eliminar Jugador</h3>
          <div class="mt-2 px-7 py-3">
            <p class="text-sm text-gray-500">
              ¿Estás seguro de que quieres eliminar a <strong id="modal-player-name"></strong> de tu plantilla?
            </p>
          </div>
          <div class="items-center px-4 py-3 gap-2 flex justify-center">
            <button id="modal-cancel" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 w-24">
              Cancelar
            </button>
            <button id="modal-confirm" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 w-24">
              Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Script de Firebase -->
    <script type="module">
        // Importaciones de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            signInAnonymously, 
            onAuthStateChanged,
            signInWithCustomToken
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc, 
            collection, 
            onSnapshot,
            addDoc,
            deleteDoc,
            query,
            where,
            getDocs
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- CONFIGURACIÓN DE DATOS ---
        const DATA_URL = "https://raw.githubusercontent.com/josechico94/Coca/refs/heads/main/fantapro_data.json"; // <-- ¡PEGA TU URL "RAW" DE GIST AQUÍ!
        
        // --- CONFIGURACIÓN DE FIREBASE ---
        // Estas variables se inyectarán en el entorno de producción
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id-fantapro';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app, auth, db, userId;
        let currentRosa = []; // Caché local de la plantilla
        let unsubscribeRosa; // Función para detener el listener de Firestore
        let DB_GIOCATORI = []; // La base de datos ahora se cargará dinámicamente

        // --- BASE DE DATOS ESTATICA DE JUGADORES (Datos Reales Simulados) ---
        // (En una app real, esto vendría de una API, pero lo incrustamos aquí)
        // ESTA SECCIÓN HA SIDO ELIMINADA Y SE CARGARÁ DESDE DATA_URL
        
        // --- INICIALIZACIÓN DE LA APP ---

        document.addEventListener('DOMContentLoaded', () => {
            // Iniciamos la carga de datos primero
            initApp();
        });

        async function initApp() {
            const loadingText = document.getElementById('loading-players');
            
            if (!DATA_URL || DATA_URL === "PEGA_AQUÍ_TU_URL_RAW_DE_GIST" || DATA_URL === "") {
                loadingText.innerHTML = `
                    <p class="text-lg text-red-600">Error: Falta la URL de datos.</p>
                    <p class="text-sm text-gray-500">Por favor, edita el archivo HTML y añade la URL de tu Gist en la variable DATA_URL.</p>
                `;
                return;
            }

            try {
                loadingText.innerHTML = `<p class="text-lg text-gray-600">Cargando datos de jugadores...</p>`;
                const response = await fetch(DATA_URL);
                if (!response.ok) {
                    throw new Error(`Error al cargar datos: ${response.statusText}`);
                }
                DB_GIOCATORI = await response.json();
                
                // Una vez cargados los datos, continuamos con la inicialización
                initAuth();
                populateFilters();
                renderPlayerList();

                // Añadimos listeners a los filtros
                document.getElementById('filter-role').addEventListener('change', renderPlayerList);
                document.getElementById('filter-team').addEventListener('change', renderPlayerList);
                document.getElementById('sort-by').addEventListener('change', renderPlayerList);

                // Listeners del Modal
                document.getElementById('modal-cancel').addEventListener('click', closeModal);

            } catch (error) {
                console.error("Error al cargar datos de jugadores:", error);
                loadingText.innerHTML = `
                    <p class="text-lg text-red-600">Error al cargar datos.</p>
                    <p class="text-sm text-gray-500">Verifica la URL de Gist y que el JSON sea válido.</p>
                    <p class="text-xs text-gray-400 font-mono mt-2">${error.message}</p>
                `;
            }
        }

        // --- LÓGICA DE AUTENTICACIÓN ---

        async function initAuth() {
            try {
                // Inicializar Firebase
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                const authButton = document.getElementById('auth-button');
                authButton.disabled = true;

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        authButton.textContent = 'Conectado';
                        authButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                        authButton.classList.add('bg-green-600', 'cursor-default');
                        document.getElementById('user-id').textContent = `Tu User ID: ${userId}`;
                        
                        // Una vez autenticados, cargamos la plantilla
                        loadRosa();
                    } else {
                        // Si no hay usuario, intentamos loguear
                        authButton.textContent = 'Conectando...';
                        try {
                            if (initialAuthToken) {
                                await signInWithCustomToken(auth, initialAuthToken);
                            } else {
                                await signInAnonymously(auth);
                            }
                        } catch (error) {
                            console.error("Error al iniciar sesión:", error);
                            authButton.textContent = 'Error de conexión';
                            authButton.classList.remove('bg-indigo-600');
                            authButton.classList.add('bg-red-600');
                        }
                    }
                });

            } catch (e) {
                console.error("Error inicializando Firebase. ¿Falta configuración?", e);
                document.getElementById('auth-button').textContent = 'Error de Config.';
                document.getElementById('auth-button').classList.add('bg-red-600');
            }
        }

        // --- LÓGICA DE RENDERIZADO (VISTAS) ---

        function populateFilters() {
            // Asegurarnos que DB_GIOCATORI esté cargado
            if (!DB_GIOCATORI || DB_GIOCATORI.length === 0) return;

            const teams = [...new Set(DB_GIOCATORI.map(p => p.squadra))].sort();
            const teamSelect = document.getElementById('filter-team');
            
            // Limpiamos opciones anteriores (excepto la primera)
            while (teamSelect.options.length > 1) {
                teamSelect.remove(1);
            }

            teams.forEach(team => {
                const option = document.createElement('option');
                option.value = team;
                option.textContent = team;
                teamSelect.appendChild(option);
            });
        }

        function renderPlayerList() {
            const grid = document.getElementById('player-grid');
            const loading = document.getElementById('loading-players');
            grid.innerHTML = ''; // Limpiamos el grid
            
            // Si DB_GIOCATORI aún no se ha cargado (porque falló initApp), no hacemos nada más.
            if (!DB_GIOCATORI || DB_GIOCATORI.length === 0) {
                loading.style.display = 'block'; // Mantenemos el mensaje de carga/error
                return;
            }
            
            loading.style.display = 'none'; // Ocultamos el mensaje de carga si hay datos

            // Obtenemos valores de filtros
            const roleFilter = document.getElementById('filter-role').value;
            const teamFilter = document.getElementById('filter-team').value;
            const sortBy = document.getElementById('sort-by').value;

            // 1. Filtrar
            let filteredPlayers = DB_GIOCATORI.filter(player => {
                const matchesRole = (roleFilter === 'all') || (player.ruolo === roleFilter);
                const matchesTeam = (teamFilter === 'all') || (player.squadra === teamFilter);
                return matchesRole && matchesTeam;
            });

            // 2. Ordenar
            filteredPlayers.sort((a, b) => {
                switch (sortBy) {
                    case 'fm_asc': return a.fm - b.fm;
                    case 'mv_desc': return b.mv - a.mv;
                    case 'nome_asc': return a.nome.localeCompare(b.nome);
                    case 'fm_desc':
                    default:
                        return b.fm - a.fm;
                }
            });

            // 3. Renderizar
            if (filteredPlayers.length === 0) {
                grid.innerHTML = `<p class="text-gray-500 md:col-span-2 xl:col-span-3 text-center">No se encontraron jugadores con esos filtros.</p>`;
                return;
            }
            filteredPlayers.forEach(player => {
                const playerCard = createPlayerCard(player);
                grid.appendChild(playerCard);
            });
        }
        
        function createPlayerCard(player) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-lg shadow-md overflow-hidden p-4 transition duration-300 hover:shadow-xl';
            
            const isAdded = currentRosa.some(p => p.id === player.id);

            card.innerHTML = `
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-lg font-bold text-gray-900">${player.nome}</h3>
                        <p class="text-sm text-gray-600">${player.squadra}</p>
                    </div>
                    <span class="role-${player.ruolo} text-xs font-bold px-2 py-1 rounded-full">${player.ruolo}</span>
                </div>
                <div class="mt-4 grid grid-cols-3 gap-2 text-center">
                    <div>
                        <p class="text-xs text-gray-500">FantaMedia</p>
                        <p class="text-xl font-semibold text-indigo-600">${player.fm.toFixed(2)}</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500">Media Voto</p>
                        <p class="text-xl font-semibold text-gray-700">${player.mv.toFixed(2)}</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500">G/A</p>
                        <p class="text-xl font-semibold text-gray-700">${player.gol}/${player.assist}</p>
                    </div>
                </div>
                <div class="mt-4">
                    <button 
                        class="add-player-btn w-full px-3 py-2 rounded-md text-sm font-medium ${isAdded ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-indigo-100 text-indigo-700 hover:bg-indigo-200'}"
                        data-player-id="${player.id}"
                        ${isAdded ? 'disabled' : ''}
                    >
                        ${isAdded ? 'En la plantilla' : 'Añadir a la plantilla'}
                    </button>
                </div>
            `;

            // Añadir listener al botón (si no está deshabilitado)
            if (!isAdded) {
                card.querySelector('.add-player-btn').addEventListener('click', (e) => {
                    const playerId = parseInt(e.target.dataset.playerId);
                    addPlayerToRosa(playerId);
                });
            }

            return card;
        }

        function renderMiaRosa(rosaPlayers) {
            // Limpiamos listas
            const rosaEmpty = document.getElementById('rosa-empty');
            const lists = {
                P: document.getElementById('rosa-P'),
                D: document.getElementById('rosa-D'),
                C: document.getElementById('rosa-C'),
                A: document.getElementById('rosa-A'),
            };
            Object.values(lists).forEach(list => list.innerHTML = '');
            
            // Contadores
            const counts = { P: 0, D: 0, C: 0, A: 0 };
            
            if (rosaPlayers.length === 0) {
                rosaEmpty.style.display = 'block';
            } else {
                rosaEmpty.style.display = 'none';
                rosaPlayers.forEach(player => {
                    // Buscamos los datos completos del jugador en nuestra DB estática
                    const playerData = DB_GIOCATORI.find(p => p.id === player.id);
                    if (playerData) {
                        counts[playerData.ruolo]++;
                        const playerRow = createRosaRow(playerData, player.docId);
                        lists[playerData.ruolo].appendChild(playerRow);
                    }
                });
            }
            
            // Actualizamos contadores
            document.getElementById('rosa-count').textContent = rosaPlayers.length;
            document.getElementById('count-P').textContent = counts.P;
            document.getElementById('count-D').textContent = counts.D;
            document.getElementById('count-C').textContent = counts.C;
            document.getElementById('count-A').textContent = counts.A;

            // Actualizamos la lista de jugadores (para habilitar/deshabilitar botones)
            // Solo lo hacemos si los jugadores ya están cargados
            if (DB_GIOCATORI.length > 0) {
                renderPlayerList();
            }
        }

        function createRosaRow(player, docId) {
            const row = document.createElement('div');
            row.className = 'flex items-center justify-between p-2 bg-gray-50 rounded-md';
            row.innerHTML = `
                <div class="flex items-center gap-2">
                    <span class="role-${player.ruolo} text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full">${player.ruolo}</span>
                    <div>
                        <p class="text-sm font-medium text-gray-800">${player.nome}</p>
                        <p class="text-xs text-gray-500">${player.squadra}</p>
                    </div>
                </div>
                <button class="remove-player-btn text-red-400 hover:text-red-600" data-doc-id="${docId}" data-player-name="${player.nome}">
                    <ion-icon name="close-circle-outline" class="text-lg"></ion-icon>
                </button>
            `;
            
            row.querySelector('.remove-player-btn').addEventListener('click', (e) => {
                const btn = e.currentTarget;
                const docId = btn.dataset.docId;
                const playerName = btn.dataset.playerName;
                openDeleteModal(playerName, docId);
            });
            
            return row;
        }
        
        // --- LÓGICA DE FIRESTORE (DATOS) ---
        
        function getRosaCollectionRef() {
            // Ruta de la colección privada del usuario
            return collection(db, `artifacts/${appId}/users/${userId}/miaRosa`);
        }

        async function loadRosa() {
            if (unsubscribeRosa) unsubscribeRosa(); // Detenemos el listener anterior si existe

            const rosaCollection = getRosaCollectionRef();
            
            // onSnapshot escucha cambios en tiempo real
            unsubscribeRosa = onSnapshot(rosaCollection, (snapshot) => {
                currentRosa = snapshot.docs.map(doc => ({
                    ...doc.data(),
                    docId: doc.id
                }));
                
                // Ordenamos por rol
                currentRosa.sort((a, b) => {
                    // Asegurarnos que DB_GIOCATORI esté cargado antes de ordenar
                    if (DB_GIOCATORI.length === 0) return 0;
                    
                    const playerA = DB_GIOCATORI.find(p => p.id === a.id);
                    const playerB = DB_GIOCATORI.find(p => p.id === b.id);
                    if (!playerA || !playerB) return 0;
                    
                    const roleOrder = { 'P': 1, 'D': 2, 'C': 3, 'A': 4 };
                    return roleOrder[playerA.ruolo] - roleOrder[playerB.ruolo];
                });
                
                renderMiaRosa(currentRosa);
            }, (error) => {
                console.error("Error al cargar la plantilla (onSnapshot): ", error);
                // No usamos alert()
                console.error("Error al conectar con la base de datos.");
            });
        }

        async function addPlayerToRosa(playerId) {
            if (currentRosa.length >= 25) {
                // No usamos alert()
                console.warn("Plantilla llena. No puedes añadir más de 25 jugadores.");
                // Podríamos mostrar un modal o un toast aquí
                return;
            }

            const playerToAdd = DB_GIOCATORI.find(p => p.id === playerId);
            if (!playerToAdd) return;

            // Deshabilitamos el botón para evitar doble click
            const btn = document.querySelector(`.add-player-btn[data-player-id="${playerId}"]`);
            if (btn) {
                btn.disabled = true;
                btn.textContent = 'Añadiendo...';
            }

            try {
                // Añadimos solo el ID a Firestore para ahorrar espacio
                await addDoc(getRosaCollectionRef(), {
                    id: playerToAdd.id,
                    addedAt: new Date().toISOString()
                });
                // No necesitamos hacer nada más, onSnapshot se encargará de actualizar la UI
            } catch (error) {
                console.error("Error al añadir jugador: ", error);
                if (btn) btn.disabled = false; // Reactivamos el botón si hay error
            }
        }

        async function removePlayerFromRosa(docId) {
            try {
                const docRef = doc(db, `artifacts/${appId}/users/${userId}/miaRosa/${docId}`);
                await deleteDoc(docRef);
                closeModal(); // Cerramos el modal tras el éxito
                // onSnapshot actualizará la UI
            } catch (error) {
                console.error("Error al eliminar jugador: ", error);
                // No usamos alert()
                console.error("Error al eliminar el jugador. Inténtalo de nuevo.");
            }
        }
        
        // --- LÓGICA DEL MODAL ---
        
        let docIdToDelete = null;

        function openDeleteModal(playerName, docId) {
            docIdToDelete = docId;
            document.getElementById('modal-player-name').textContent = playerName;
            document.getElementById('delete-modal').classList.remove('hidden');
            
            // Asignamos el listener al botón de confirmar (lo hacemos aquí para tener el docId)
            const confirmBtn = document.getElementById('modal-confirm');
            confirmBtn.onclick = () => removePlayerFromRosa(docIdToDelete);
        }

        function closeModal() {
            docIdToDelete = null;
            document.getElementById('delete-modal').classList.add('hidden');
            // Limpiamos el listener
            document.getElementById('modal-confirm').onclick = null;
        }

    </script>
</body>
</html>

